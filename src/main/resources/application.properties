# ===============================================
# APPLICATION CONFIGURATION
# ===============================================
spring.application.name=llm-circuit-service
server.port=8080
server.servlet.context-path=/api/v1

# ===============================================
# LOGGING CONFIGURATION
# ===============================================
logging.level.root=INFO
logging.level.com.venu.llm.circuit=DEBUG
logging.level.org.springframework.web=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/llm-service.log
logging.file.max-size=10MB
logging.file.max-history=30

# ===============================================
# JACKSON CONFIGURATION
# ===============================================
spring.jackson.serialization.indent-output=true
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# ===============================================
# ACTUATOR CONFIGURATION
# ===============================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true
management.info.env.enabled=true

# ===============================================
# GOOGLE GEMINI CONFIGURATION
# ===============================================
llm.gemini.enabled=true
llm.gemini.api-url=https://generativelanguage.googleapis.com/v1beta
llm.gemini.model=gemini-pro
llm.gemini.temperature=0.7
llm.gemini.max-tokens=2048
llm.gemini.timeout=60000
llm.gemini.top-p=0.95
llm.gemini.top-k=40

# ===============================================
# CIRCUIT BREAKER CONFIGURATION (RESILIENCE4J)
# ===============================================
resilience4j.circuitbreaker.instances.gemini-service.sliding-window-size=10
resilience4j.circuitbreaker.instances.gemini-service.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.gemini-service.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.gemini-service.wait-duration-in-open-state=30000
resilience4j.circuitbreaker.instances.gemini-service.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.gemini-service.automatic-transition-from-open-to-half-open-enabled=true

# ===============================================
# RETRY CONFIGURATION (RESILIENCE4J)
# ===============================================
resilience4j.retry.instances.gemini-service.max-attempts=3
resilience4j.retry.instances.gemini-service.wait-duration=2000
resilience4j.retry.instances.gemini-service.enable-exponential-backoff=true
resilience4j.retry.instances.gemini-service.exponential-backoff-multiplier=2
resilience4j.retry.instances.gemini-service.retry-exceptions=org.springframework.web.client.ResourceAccessException,org.springframework.web.client.HttpServerErrorException

# ===============================================
# RATE LIMITER CONFIGURATION (RESILIENCE4J)
# ===============================================
resilience4j.ratelimiter.instances.gemini-service.limit-for-period=60
resilience4j.ratelimiter.instances.gemini-service.limit-refresh-period=60s
resilience4j.ratelimiter.instances.gemini-service.timeout-duration=5s

# ===============================================
# THREAD POOL CONFIGURATION
# ===============================================
llm.executor.core-pool-size=10
llm.executor.max-pool-size=50
llm.executor.queue-capacity=100
llm.executor.thread-name-prefix=gemini-executor-

# ===============================================
# REQUEST VALIDATION
# ===============================================
llm.validation.max-prompt-length=30000
llm.validation.min-prompt-length=1